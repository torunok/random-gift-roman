# Random Gift for Roman

–°—Ç–∞—Ç–∏—á–Ω–∏–π —Ñ—Ä–æ–Ω—Ç (GitHub Pages) + –±–µ–∫ (Cloudflare Worker + D1 + KV). –ü—Ä–∏–≤‚Äô—è–∑–∫–∞ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –¥–æ –ø–æ–¥–∞—Ä—É–Ω–∫–∞ —á–µ—Ä–µ–∑ ipHash (sha256(IP+SALT)).

## 1) –ü—ñ–¥–≥–æ—Ç–æ–≤–∫–∞

- –í—Å—Ç–∞–Ω–æ–≤–∏ Node 18+.
- –í—Å—Ç–∞–Ω–æ–≤–∏ Wrangler: `npm i -g wrangler`.
- –°—Ç–≤–æ—Ä–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π GitHub. –ü–æ–∫–ª–∞–¥–∏ –ø–∞–ø–∫—É `site/` —ñ —Ñ–∞–π–ª–∏ –≤–æ—Ä–∫–µ—Ä–∞ –≤ –∫–æ—Ä—ñ–Ω—å.

## 2) Cloudflare D1 + KV

```bash
wrangler kv:namespace create KV
wrangler d1 create random_gift_db
# –ü—ñ—Å–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø—ñ–¥—Å—Ç–∞–≤ ID —É wrangler.toml
wrangler d1 execute random_gift_db --file=./schema.sql
```

## 3) –°–µ–∫—Ä–µ—Ç–∏ —Ç–∞ –∑–º—ñ–Ω–Ω—ñ

```bash
wrangler secret put JWT_SECRET
wrangler secret put ADMIN_USER
wrangler secret put ADMIN_PASS
wrangler secret put SALT
```

## 4) –î–µ–ø–ª–æ–π –≤–æ—Ä–∫–µ—Ä–∞

```bash
wrangler deploy
# –û—Ç—Ä–∏–º–∞—î—à URL –≤–æ—Ä–∫–µ—Ä–∞, –Ω–∞–ø—Ä.: https://random-gift-roman.username.workers.dev
```

## 5) –ù–∞–ª–∞—à—Ç—É–π —Ñ—Ä–æ–Ω—Ç

- –£ `site/index.html` —Ç–∞ `site/admin.html` –≤—Å—Ç–∞–Ω–æ–≤–∏ `window.API_BASE` = URL –≤–æ—Ä–∫–µ—Ä–∞.
- –ó–∞–ª–∏–π —É `site/images/roman.jpg` —Å–≤–æ—î —Ñ–æ—Ç–æ.

## 6) GitHub Pages

- –£–≤—ñ–º–∫–Ω–∏ Pages –¥–ª—è –≥—ñ–ª–∫–∏ `main` (–∫–æ—Ä—ñ–Ω—å –∞–±–æ /docs). –Ø–∫—â–æ –∫–æ—Ä—ñ–Ω—å ‚Äî —Ñ–∞–π–ª–∏ –≤–∂–µ –Ω–∞ –º—ñ—Å—Ü—ñ.
- –£ `wrangler.toml` –∑–º—ñ–Ω—ñ–π `ALLOWED_ORIGIN` –Ω–∞ –¥–æ–º–µ–Ω GitHub Pages.

## 7) –î–æ–¥–∞–≤–∞–Ω–Ω—è –ø–æ–¥–∞—Ä—É–Ω–∫—ñ–≤

- –ü–µ—Ä–µ–π–¥–∏ –Ω–∞ `/admin.html` ‚Üí –£–≤—ñ–π–¥–∏ –ª–æ–≥—ñ–Ω–æ–º/–ø–∞—Ä–æ–ª–µ–º (—ñ–∑ —Å–µ–∫—Ä–µ—Ç—ñ–≤).
- –°—Ç–≤–æ—Ä–∏ –ø–æ–¥–∞—Ä—É–Ω–∫–∏ (–Ω–∞–∑–≤–∞, –æ–ø–∏—Å, URL –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è, –∞–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å).

## 8) –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ñ–ª–æ—É

- –ó–∞–π–¥–∏ –Ω–∞ –≥–æ–ª–æ–≤–Ω—É. –ü–æ–≥–æ–¥—å—Å—è –∑ —É–º–æ–≤–∞–º–∏, –≤–≤–µ–¥–∏ —ñ–º‚Äô—è.
- –ü—Ä–æ–π–¥–∏ –∞–Ω—ñ–º–∞—Ü—ñ—é, –¥–æ—á–µ–∫–∞–π—Å—è —Ä–∞–Ω–¥–æ–º—É.
- –í–≤–µ–¥–∏ Telegram ‚Äî –∑–∞–ø–∏—Å –∑–∞—Ñ—ñ–∫—Å—É—î—Ç—å—Å—è.
- –ü–æ–≤—Ç–æ—Ä–Ω–∏–π –≤—Ö—ñ–¥ –∑ —Ç–æ–≥–æ –∂ IP ‚Üí –æ–¥—Ä–∞–∑—É –ø–æ–∫–∞–∑—É—î —Ç–≤—ñ–π –ø–æ–¥–∞—Ä—É–Ω–æ–∫.

## 9) –†–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è/–≤–∏–¥–∞–ª–µ–Ω–Ω—è –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è

- –í –∞–¥–º—ñ–Ω—Ü—ñ –≤–∫–ª–∞–¥–∫–∞ Assignments ‚Üí –º–æ–∂–Ω–∞ –≤–∏–¥–∞–ª–∏—Ç–∏ –∑–∞–ø–∏—Å, —Ç–æ–¥—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –∑–Ω–æ–≤—É –∑–º–æ–∂–µ –ø—Ä–æ–π—Ç–∏ —Ä–∞–Ω–¥–æ–º.

## 10) –ù–æ—Ç–∞—Ç–∫–∏

- –Ø–∫—â–æ GitHub Pages –º–∞—î —ñ–Ω—à–∏–π –¥–æ–º–µ–Ω (–ø—ñ–¥–∫–∞—Ç–∞–ª–æ–≥), –Ω–µ –∑–∞–±—É–¥—å —Ç–æ—á–Ω–∏–π `ALLOWED_ORIGIN`.
- –ó–æ–±—Ä–∞–∂–µ–Ω–Ω—è –ø–æ–¥–∞—Ä—É–Ω–∫—ñ–≤ –º–æ–∂–Ω–∞ —Ö–æ—Å—Ç–∏—Ç–∏ –ø—Ä—è–º–æ –≤ `site/` –∞–±–æ –±—É–¥—å-–¥–µ –∑ HTTPS.
- –î–ª—è production –º–æ–∂–µ—à –ø—Ä–∏–≤‚Äô—è–∑–∞—Ç–∏ —Å–≤—ñ–π –¥–æ–º–µ–Ω –¥–æ –≤–æ—Ä–∫–µ—Ä–∞ —Ç–∞ –æ–Ω–æ–≤–∏—Ç–∏ `ALLOWED_ORIGIN`.

```

---

### ‚úÖ –ì–æ—Ç–æ–≤–æ –¥–æ –∑–∞–ø—É—Å–∫—É
- –ó–∞–º—ñ–Ω–∏ `__REPLACE_WITH_WORKER_URL__` —É `index.html` —ñ `admin.html` –Ω–∞ —Ä–µ–∞–ª—å–Ω—É –∞–¥—Ä–µ—Å—É –≤–æ—Ä–∫–µ—Ä–∞.
- –ó–∞–ø–æ–≤–Ω–∏ —Å–µ–∫—Ä–µ—Ç–∏, —Å—Ç–≤–æ—Ä–∏ KV —Ç–∞ D1, –∑–∞–¥–µ–ø–ª–æ–π.
- –î–æ–¥–∞–π –ø–æ–¥–∞—Ä—É–Ω–∫–∏ —á–µ—Ä–µ–∑ –∞–¥–º—ñ–Ω–∫—É ‚Äî —ñ –≤–ø–µ—Ä–µ–¥ üöÄ
```
